
<?php  $_savecards=$block->getSavedCard(); ?>

<?= /* @noEscape */ $block->getChildHtml('info');?>
<?php if ($_savecards && count($_savecards)): ?>
    <div class="table-wrapper saved-cards">
        <table class="data table table-savedcard-items history" id="my-savecards-table">
            <caption class="table-caption"><?= /* @noEscape */__('Saved Cards') ?></caption>
            <thead>
                <tr>
                    <th scope="col" class="col id"><?= /* @noEscape */ $block->getMyAccountLabels('AC2') ?></th>
                    <th scope="col" class="col date"><?= /* @noEscape */ $block->getMyAccountLabels('AC3') ?></th>
                    <th scope="col" class="col shipping"><?= /* @noEscape */ $block->getCheckoutLabels('CO4') ?></th>
                    <th scope="col" class="col total"><?= /* @noEscape */ $block->getMyAccountLabels('AC4') ?></th>
                    <th scope="col" class="col status"><?= /* @noEscape */ $block->getMyAccountLabels('AC5') ?></th>
                    <th scope="col" class="col actions">&nbsp;</th>
                </tr>
            </thead>
            <tbody>
                <?php foreach ($_savecards as $_savecard): ?>
                    <tr>
                        <td data-th="<?= /* @noEscape */ $block->escapeHtml($block->getMyAccountLabels('AC2')) ?>"
                            class="col id"><?= /* @noEscape */ $_savecard->getCardBrand() ?>
                        </td>
                           <td data-th="<?= /* @noEscape */ $block->escapeHtml($block->getMyAccountLabels('AC3')) ?>"
                               class="col date"><?= /* @noEscape */ $_savecard->getCardNumber() ?>
                           </td>
                        <td data-th="<?= /* @noEscape */ $block->escapeHtml($block->getCheckoutLabels('CO4')) ?>"
                            class="col shipping"><?= /* @noEscape */ $_savecard->getCardholderName() ?>
                        </td>
                        <td data-th="<?= /* @noEscape */$block->escapeHtml($block->getMyAccountLabels('AC4')) ?>"
                            class="col total"><?= /* @noEscape */ $_savecard->getCardExpiryMonth() ?>
                        </td>
                        <td data-th="<?= /* @noEscape */$block->escapeHtml($block->getMyAccountLabels('AC5')) ?>"
                            class="col status"><?= /* @noEscape */ $_savecard->getCardExpiryYear() ?>
                        </td>
                        <td data-th="<?= /* @noEscape */ $block->escapeHtml($block->getMyAccountLabels('AC21')) ?>" 
                            class="col actions">
                           
                              <?php
                                if ($_savecard->getTokenCode() != '') {
                                    ?>
                            <a href="<?= /* @noEscape */ $block->getEditUrl($_savecard) ?>" class="action view">
                                <span><?= /* @noEscape */ $block->getMyAccountLabels('AC6') ?></span>
                            </a>
                                    <?php
                                }
                                ?>
                            
                        </td>
                        <td data-th="<?= /* @noEscape */ $block->escapeHtml($block->getMyAccountLabels('AC21')) ?>" 
                            class="col actions">
                        <a href="javascript:void(0)" data-delete-url="
                        <?= /* @noEscape */ $block->getDeleteUrl($_savecard); ?>" class="action delete">
                            <span><?= /* @noEscape */ $block->getMyAccountLabels('AC11') ?></span></a>
                        </td>
                    </tr>
                <?php endforeach; ?>
            </tbody>
        </table>
        <script type="text/javascript">
            require([
                'jquery',
                'Magento_Ui/js/modal/confirm'
            ], function($, confirm) {
                $(".action.delete").on("click", function(event) {   
                    confirm({
                        title: 'Delete',
                        content: 'Are you sure you want to delete the card? \n\
                        Once the card is deleted, subscriptions associated with it will be cancelled!!!',
                        actions: {
                            confirm: function() {
                                window.location.href = $(event.currentTarget).data('delete-url');
                            }
                        }
                    });
                });
            });
        </script>
    </div>
<?php else: ?>
    <div class="message info empty">
        <span><?= /* @noEscape */ $block->getMyAccountLabels('AC30'); ?></span>
    </div>
<?php endif ?>

